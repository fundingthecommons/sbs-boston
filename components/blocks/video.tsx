import * as React from "react";
import { Section } from "../section";
import { TinaMarkdown } from "tinacms/dist/rich-text";

export const Video = ({ data, parentField = "" }) => {
  return (
    <Section>
      <div className="mx-auto max-w-desktop-full transform scale-110">
        <div className="relative w-full">
          <video className="relative w-full transform border-2 border-white sm:h-80 object-cover" autoPlay loop muted>
            <source src={`/uploads/${data.src}`} type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          {data?.text?.children && (
            <div className={`mx-auto py-16 sm:py-4 text-center absolute top-1/2 transform -translate-y-1/2 ${data.padding} ${data.textStyles}`}>
              <div className="absolute inset-0 bg-primary opacity-70 py-4">
                <svg className="mx-auto" height="100%" viewBox="0 0 207 227" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path opacity="0.7" fill-rule="evenodd" clip-rule="evenodd" d="M150.829 18.8294L160.298 35.2841C160.438 35.525 160.511 35.799 160.51 36.0777C160.509 36.3565 160.433 36.6298 160.291 36.8695C160.149 37.1091 159.946 37.3063 159.702 37.4407C159.459 37.575 159.184 37.6415 158.906 37.6334H139.958C139.684 37.6315 139.416 37.5579 139.18 37.42C138.943 37.282 138.747 37.0846 138.61 36.8471C138.474 36.6097 138.401 36.3406 138.4 36.0664C138.399 35.7922 138.47 35.5226 138.605 35.2841L140.32 32.3353L106.991 13.0201L62.811 38.577L56.6844 27.9316L101.796 1.79473C103.376 0.88684 105.165 0.40918 106.986 0.40918C108.808 0.40918 110.597 0.88684 112.177 1.79473L146.486 21.6603L148.113 18.8294C148.251 18.5906 148.449 18.3924 148.687 18.2545C148.926 18.1167 149.196 18.0441 149.471 18.0441C149.746 18.0441 150.016 18.1167 150.255 18.2545C150.493 18.3924 150.691 18.5906 150.829 18.8294ZM17.289 167.669V114.648H20.7101C20.9843 114.648 21.2537 114.576 21.4914 114.438C21.729 114.301 21.9267 114.104 22.0645 113.866C22.2024 113.628 22.2757 113.359 22.2771 113.084C22.2786 112.809 22.2081 112.538 22.0727 112.299L12.5935 95.8441C12.4552 95.6076 12.2575 95.4115 12.0202 95.2752C11.7829 95.139 11.5142 95.0673 11.2408 95.0673C10.9673 95.0673 10.6986 95.139 10.4613 95.2752C10.224 95.4115 10.0264 95.6076 9.88801 95.8441L0.418694 112.299C0.280545 112.537 0.207528 112.807 0.207034 113.082C0.206539 113.358 0.278585 113.628 0.415879 113.867C0.553172 114.105 0.750842 114.303 0.988883 114.44C1.22692 114.577 1.49689 114.649 1.77145 114.648H5.02592V168.76C5.02885 170.587 5.50915 172.382 6.41897 173.965C7.32878 175.548 8.63637 176.865 10.2115 177.784L54.5193 203.429L60.6557 192.774L17.289 167.669ZM194.696 117.538V168.544L161.368 187.859L159.652 184.91C159.516 184.671 159.319 184.472 159.081 184.334C158.844 184.196 158.574 184.123 158.299 184.123C158.025 184.123 157.755 184.196 157.517 184.334C157.28 184.472 157.083 184.671 156.947 184.91L147.477 201.365C147.339 201.603 147.266 201.873 147.266 202.148C147.265 202.424 147.337 202.694 147.474 202.933C147.612 203.171 147.809 203.369 148.047 203.506C148.285 203.643 148.555 203.715 148.83 203.714H167.778C168.052 203.712 168.32 203.639 168.556 203.501C168.793 203.363 168.989 203.165 169.126 202.928C169.262 202.69 169.335 202.421 169.336 202.147C169.337 201.873 169.266 201.603 169.131 201.365L167.504 198.534L201.813 178.668C203.387 177.751 204.695 176.436 205.604 174.855C206.514 173.273 206.995 171.48 206.999 169.655V117.558L194.696 117.538ZM171.173 72.2336L111.475 37.6727C109.895 36.7649 108.106 36.2872 106.285 36.2872C104.464 36.2872 102.674 36.7649 101.094 37.6727L41.3768 72.2336C39.7985 73.1496 38.4879 74.4653 37.5761 76.0489C36.6643 77.6325 36.1834 79.4285 36.1814 81.2571V150.379C36.1841 152.206 36.6655 154 37.5773 155.582C38.4891 157.164 39.7993 158.478 41.3768 159.393L86.5668 185.549V171.345L48.4641 149.288V82.3384L106.299 48.9178L164.135 82.3875V149.337L126.003 171.345V185.549L171.173 159.393C172.751 158.478 174.061 157.164 174.973 155.582C175.885 154 176.366 152.206 176.369 150.379V81.2571C176.367 79.4285 175.886 77.6325 174.974 76.0489C174.062 74.4653 172.751 73.1496 171.173 72.2336ZM143.375 87.2333V101.437L112.408 119.366V141.473L143.375 123.554V137.748L112.408 155.677V226.263H100.145V155.677L69.1789 137.748V123.544L100.145 141.473V119.366L69.1789 101.437V87.2333L100.145 105.162V69.9234H112.408V105.162L143.375 87.2333Z" fill="white"/>
                </svg>
              </div>
              <div className="relative z-20">
                <TinaMarkdown content={data.text} />
              </div>
            </div>
          )}
          <img className="absolute inset-0 sm:h-80" src="./uploads/video-overlay.png" />
        </div>
      </div>
    </Section>
  );
};

export const videoBlockSchema: any = {
  label: "Video",
  name: "video",
  fields: [
    {
      label: "Video",
      name: "src",
      type: "string",
    },
    {
      label: "Overlay Text",
      name: "text",
      type: "rich-text",
    },
    {
      type: "string",
      label: "Text",
      name: "textStyles",
      ui: {
        component: "typeControl"
      }
    },
    {
      label: "Padding",
      name: "padding",
      type: "string",
      ui: {
        component: "paddingControl",
      }
    },
  ],
};